<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>焦点图轮播</title>
    <link href="css/carousel.css" rel="stylesheet" type="text/css" />
    <script src="js/jquery.1.10.2.js" rel="stylesheet" type="text/javascript"></script>
</head>
<body>
<div id="box">
    <div id="pics" style="left: -600px">
        <img src="images/7.jpg" alt="1" />
        <img src="images/1.jpg" alt="1" />
        <img src="images/2.jpg" alt="2" />
        <img src="images/3.jpg" alt="3" />
        <img src="images/4.jpg" alt="4" />
        <img src="images/5.jpg" alt="5" />
        <img src="images/6.jpg" alt="6" />
        <img src="images/7.jpg" alt="7" />
        <img src="images/1.jpg" alt="7" />
    </div>
    <div id="dots">
        <span index="1" class="on"></span>
        <span index="2"></span>
        <span index="3"></span>
        <span index="4"></span>
        <span index="5"></span>
        <span index="6"></span>
        <span index="7"></span>
    </div>
    <div class="turn" id="pre">&lt;</div>
    <div class="turn" id="next">&gt;</div>
</div>

<script type="text/javascript">

    $(function () {
        var container = $('#box');
        var list = $('#pics');
        var buttons = $('#dots span');
        var prev = $('#pre');
        var next = $('#next');
        var index = 1;
        var len = 7;
        var interval = 3000;
        var timer;


        function animate (offset) {
            var left = parseInt(list.css('left')) + offset;
            if (offset>0) {
                offset = '+=' + offset;
            }
            else {
                offset = '-=' + Math.abs(offset);
            }
            list.animate({'left': offset}, 300, function () {
                if(left > -200){
                    list.css('left', -600 * len);
                }
                if(left < (-600 * len)) {
                    list.css('left', -600);
                }
            });
        }

        function showButton() {
            buttons.eq(index-1).addClass('on').siblings().removeClass('on');
        }

        function play() {
            timer = setTimeout(function () {
                next.trigger('click');
                play();
            }, interval);
        }
        function stop() {
            clearTimeout(timer);
        }

        next.bind('click', function () {
            if (list.is(':animated')) {
                return;
            }
            if (index == 7) {
                index = 1;
            }
            else {
                index += 1;
            }
            animate(-600);
            showButton();
        });

        prev.bind('click', function () {
            if (list.is(':animated')) {
                return;
            }
            if (index == 1) {
                index = 7;
            }
            else {
                index -= 1;
            }
            animate(600);
            showButton();
        });

        buttons.each(function () {
            $(this).bind('click', function () {
                if (list.is(':animated') || $(this).attr('class')=='on') {
                    return;
                }
                var myIndex = parseInt($(this).attr('index'));
                var offset = -600 * (myIndex - index);

                animate(offset);
                index = myIndex;
                showButton();
            })
        });

        container.hover(stop, play);

        play();

    });
</script>

</body>
</html>